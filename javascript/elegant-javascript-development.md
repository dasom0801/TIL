# 우아한 자바스크립트 개발

> 코드스피츠 - [특강] Code Squad 윤지수 마스터님 <https://www.youtube.com/watch?v=25Si0Sq3Vbs>

+ 클린코드

  + 변경을 위한 코딩, 변경에 대비한 코드가 중요
  + 컴퓨터가 이해하는 코드는 당장 버그가 없는 코드, 거기에 사람이 쉽게 이해하는 코드는 앞으로도 버그가 없는 코드
  + <u>"읽기 좋은 코드가 좋은 코드다"</u>

+ 가독성

  + 성능이 최우선인 경우를 제외하고는 가독성을 우석시하고 성능은 차차 필요할 때 해결한다

+ 클린한 설계

  + 클린코드는 설계를 어떻게 하느냐에 달려있다.
  + 사고의 흐름에 맞춰서 디자인하기 > 이게 어색하면 코드도 어색해진다
  + 간단하고, 명확한 구조가 나올 때까지 계속 설계한다

+ 함수 수준의 설계

  + 이름만 잘 지으면 중간은 간 설계이다. (설계가 안 좋으면 좋은 이름이 나올 수 없다.)
  + 파라미터와 반환에 집중
  + 설계 회고( 함수 이름과 반환값이 연관되어 있는가?)

+ 이름짓기

  + 구체적인 의미를 부여하자 ex) time > currentTitme, data > addressData

  + 예상할 수 있는 범위에서 동작하도록 이름을 짓는다. 

    ex) getXXX는 보통 무엇을 받아오는 것이기 때문에 2~3줄의 코드일 것이라고 예상함

  + 의미없는 숫자를 사용하지 않는다.

    ex) 3.14 * r * r 이라면 const PI = 3.14를 사용하자

  + Object literal을 이용한 매개변수 전달. 이름으로 정확하게 값을 받아올 수 있기때문에 순서를 틀린다거나 하는 실수를 막을 수 있다. 

    ```javascript
    // 함수선언
    function execSometing({width, height}) { // do something}
    // 함수호출
    execSomething({width: 20, height: 400});
    ```

+ 편안한 코드

  + 조건문에 함수를 사용한다. 함수를 만들어 복잡한 코드를 담고 이름을 지어주면 바로 의미를 파악할 수 있다. 코드를 빨리 읽을 수 있게된다. 
    ```javascript 
    if(isInt(n)) { console.log('정수')}
    ```

  + 불필요한 매핑없애기

  + 목적에 맞게 메소드를 나눠서 사용한다.

    ```javascript
    [1,2,3,4,5].filter(v => v%2).forEach(v=>console.log(`${v}is added`));
    ```

  + 적절한 분리 > 지나친 분리 >>> 모아두기

    함수를 모아두는 것 보다는 분리하는 것이 당연히 좋다. 

  + 같은 입력에는 늘 같은 출력을 반환(순수함수) 

    + 입력과 출력이 같다면 그 함수를 여러곳에서 쓸 수 있고 믿고 쓸 수 있다. 
    + 테스트가 쉽게 가능하다. 
    + 여러가지 상황에 따라 이 힘수가 어떻게 동작될지 모른다는 것은 불안한 상황임

  + 상태를 쉽게 예상함. 가급적 immutable. 상태를 직접 변경시키지 않고 새로운 객체를 만든다. 

    ```javascript
    let arr = [5, 1, 23, 5, 2];
    const sortedArr = [...arr].sort((a,b) => a-b);
    ```

  + 사고의 흐름으로 동작하는 것이 좋다(chaining, composition). 흐름이 눈에 잘 보이고 매끄러운 것이 좋음

  + 최근 표준으로 안전하고 편안한 코드를

  + 가급적 더 나아보이는 문법을 사용한다

+ 복잡한 코드는 싫다

  + 아닌건 빨리 제외하기, 반복문에서는 continue 사용하기

    ```javascript
    function run(arg) {
        if(arg != 10) return;
        // do something
    }
    ```

  + 중첩을 그냥 나두지 않는다. 복잡한건 나눔. 할 수 있으면 변수에 담아둔다 > 디버깅이 쉬어짐

  + 복잡한 건 숨기기. 함수에 담아두고 이름을 지어준다. 알아보기 쉽고 재사용도 가능함. 메인코드에서는 알고리즘을 숨겨 놓고 짜는 것이 좋다.

  + 일관됨

    + 최소한의 코딩컨벤션 유지하기
    + 반복처리를 마구 반복하지 않기
    + 모양 맞추기. 팀을 위해서

+ OOP

  + 변경에 잘 대응하는 코드를 만드는 것을 추구한다. 
  + 어떡하면 빨리 수정할까? 어떡하면 최소한의 수정을 할까?
  + 클래스 구조를 단순하게 유지한다. 
  + 때론, 상속대신 mixin이나 합성을 활용
  + 서브기능이 바뀌어도 메인 기능은 그대로. 비슷한 동작은 일관된 API로 동작
  + 필수가 아니면, 옵션으로 제공
  + 클래스에 안정장치 마련하기 private, symbol

+ 리팩토링

  + 복잡한 코드가 나오기 전에 짧은 주기의 리팩토링을 한다.

    [설계 > 개발 > 리팩토링] > [설계 > 개발 > 리팩토링]

  + 리팩토링의 시작은 중복을 없애는 것 부터

  + 크기만 줄여도 절반은 성공한다

  + 전역 변수를 제거한다. 인자/매게변수를 잘 사용하도록

  + 내부를 보호하기. ex) 클로저

+ 라이브러리

  + vanilla API > 없는 것 직접 만들어보기 > 라이브러리 쓰기
  + 프리임워크가 우리의 코드를 클린하게 해주지는 않는다. 

+ **클린 코드는 남을 배려하는 코드다. 그런데, 결국 나를 배려하는 코드이기도 하다.** 